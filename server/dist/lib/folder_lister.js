"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof"));var path=require("path");var fs=require("fs");var fs2=require("nodejs-fs-utils");var crypto=require("crypto");var urljoin=require("url-join");var DJPath="D:/Cafe STL/DL/Manga/DJ";var cryptHash=function cryptHash(){var hash=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return crypto.createHash("sha256").update(hash).digest("hex")};var i=0;var dirSync=function dirSync(){var dir=fs.readdirSync(DJPath,{withFileTypes:true});var folderDir=dir.map(function(folder,key){if(folder.isDirectory()){key++;var pathname=path.join(DJPath,folder.name);var createdAt=fs.statSync(pathname).birthtime.toISOString();var size=fs2.fsizeSync(pathname);return{id:"M".concat(key),hash:cryptHash(createdAt),name:path.basename(pathname),pathname:pathname,createdAt:createdAt,size:size}}});return folderDir};var getImgData=function getImgData(id){var folderDir=dirSync();for(var folder=0;folder<folderDir.length;folder++){if(folderDir[folder].id===id){var _ret=function(){var dataFolder=folderDir[folder];var data=fs.readdirSync(dataFolder.pathname).map(function(file){return{name:file,path:urljoin("static/manga",dataFolder.name,file).toLocaleString()}});return{v:{id:dataFolder.id,name:dataFolder.name,data:data}}}();if((0,_typeof2["default"])(_ret)==="object")return _ret.v}}};module.exports={getImgData:getImgData,dirSync:dirSync};