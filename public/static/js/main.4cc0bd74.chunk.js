(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{65:function(e,t){},68:function(e,t,r){},69:function(e,t,r){},7:function(e,t,r){e.exports={scroll_btn:"style_scroll_btn__2DVon",center:"style_center__2ktxo",header:"style_header__QLGaS",flex_column:"style_flex_column__2GipV",transitionize:"style_transitionize__2Cutg",NotFoundBlock:"style_NotFoundBlock__3nBZt",NotFoundCodeBlock:"style_NotFoundCodeBlock__3eTYR",GoHomeLink:"style_GoHomeLink__FUFnD",errorMsg:"style_errorMsg__3EXXt",errorBlock:"style_errorBlock__2rrBe",retryBtn:"style_retryBtn__obQzX",p_overflow:"style_p_overflow__2lbNJ",loading_style:"style_loading_style__Q5HdP",header_flex:"style_header_flex__BGuEN",logo:"style_logo__1aLeU",refresh_btn:"style_refresh_btn__3OP8f",StickyBar:"style_StickyBar__2JC9z"}},70:function(e,t,r){"use strict";r.r(t);r(44);var n=r(1),c=r(24),o=r.n(c),a=r(8),s=r(6),i=r(16),l=r(38),u=r(3),d=Object(u.d)({initialState:{blur:!0,zoom:5,page:{current:0},limit:10,brightness:100,search:{current:""}},name:"control",reducers:{setZoom:function(e,t){e.zoom=t.payload},setBrightness:function(e,t){e.brightness=t.payload},setSearch:function(e,t){e.search={prev:e.search.current||e.search.prev,current:t.payload}},toggleBlur:function(e){e.blur=!e.blur},toggleRefresh:function(e){e.refresh=!e.refresh},toggleCovers:function(e){e._updateCovers=!e._updateCovers},setPage:function(e,t){t&&(e.page=t.payload)},gotoPage:function(e,t){e.page.current=t.payload>e.page.total-1?9:t.payload<0?0:t.payload}}}),j=d.actions,b=j.setZoom,h=(j.setBrightness,j.setSearch,j.toggleBlur),f=(j.toggleCovers,j.toggleRefresh,j.setPage),m=(j.gotoPage,d.reducer),x=r(39),O=r(10),g=Object(x.a)({reducerPath:"MangaApi",baseQuery:Object(O.d)({baseUrl:"/api"}),endpoints:function(e){return{allMangas:e.query({query:function(e){return{url:"/mangas",params:e||{page:0,limit:10}}}}),getManga:e.query({query:function(e){return{url:"/manga",params:{id:e}}}}),search:e.query({query:function(e){return"/search?q=".concat(e||"")}})}}}),v=g,p=(g.useAllMangasQuery,g.useGetMangaQuery),y=(g.useLazySearchQuery,g.useSearchQuery),_=g.useLazyAllMangasQuery,N=(g.useLazyGetMangaQuery,g.usePrefetch,Object(u.a)({reducer:Object(l.a)({controls:m},v.reducerPath,v.reducer),middleware:function(e){return e().concat(v.middleware)}})),k=a.e,C=function(){return Object(a.d)()},B=N,z=r(13),F=r(23),S=r(34),w=r(19),E=r.n(w),L=r(2),P=function(e){var t=e.item,r=k((function(e){return e.controls.blur}));return Object(L.jsxs)(i.b,{className:"flex-item",title:t.name,to:"/manga?id=".concat(t.id),children:[Object(L.jsx)("img",{className:E()("bg-img",r?"blur-img":"non-blur-img"),src:t.cover||void 0}),Object(L.jsx)("div",{className:"description",children:Object(L.jsx)("p",{children:t.name})})]})},G=r(21),M=r.n(G),Q=r(7),q=r.n(Q),R=function(){return Object(L.jsx)("div",{className:q.a.loading_style,children:Object(L.jsx)("h3",{children:Object(L.jsx)("div",{className:"loading-animation",children:"Loading..."})})})},V=r(22),H=r.n(V),J=M.a.curry((function(e,t,r){for(var n=[],c=[],o=e;o<t-1&&o<e+r;o++)n.push(o+1);for(var a=e;a>0&&a>e-r;a--)c.push(a-1);return{next:n,prev:c.reverse()}})),A=function(e){var t=Object(s.f)(),r=Object(s.g)(),c=k((function(e){return e.controls})),o=c.page,a=(c.limit,Object(n.useState)(J(Number(o.current),o.total,2))),i=Object(F.a)(a,2),l=i[0],u=i[1],d=function(e){var n=H.a.parse(r.search.slice(1));t.push({search:"?"+H.a.stringify(Object.assign(n,{page:e}))})};return Object(n.useEffect)((function(){o.current===o.total-1||0===o.current?u(J(Number(o.current),o.total,4)):o.total-1-o.current===1||1===o.current?u(J(Number(o.current),o.total,3)):u(J(Number(o.current),o.total,2))}),[o]),Object(L.jsxs)("div",{className:"nav",children:[Object(L.jsx)("button",{disabled:"number"!==typeof o.first||o.current===o.first,onClick:function(){return d(o.first)},children:Object(L.jsx)(z.a,{})}),Object(L.jsx)("button",{disabled:"number"!==typeof o.prev||o.current===o.first,onClick:function(){return d(o.prev)},children:Object(L.jsx)(z.c,{})}),l.prev.map((function(e){return Object(L.jsx)("button",{onClick:function(){return d(e)},children:e},e)})),Object(L.jsx)("button",{className:"current",children:o.current}),l.next.map((function(e){return Object(L.jsx)("button",{onClick:function(){return d(e)},children:e},e)})),Object(L.jsx)("button",{disabled:"number"!==typeof o.next||o.current===o.last,onClick:function(){return d(o.next)},children:Object(L.jsx)(z.d,{})}),Object(L.jsx)("button",{disabled:"number"!==typeof o.last||o.current===o.last,onClick:function(){return d(o.last)},children:Object(L.jsx)(z.b,{})})]})},T=function(e){var t,r=k((function(e){return e.controls}));M.a.times(10,(function(e){return{value:e+5,label:e+5}}));return Object(L.jsxs)("div",{className:"main-reader",children:["number"===typeof r.page.total&&Object(L.jsx)(L.Fragment,{children:Object(L.jsx)(A,{refetch:e.refetch})}),Object(L.jsx)("div",{className:"main-reader-box",children:!e.loading&&e.data?Object(L.jsx)("div",{className:E()("main-reader-flex","current"),children:null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(L.jsx)(P,{item:e},e.id)}))}):Object(L.jsx)(R,{})})]})},U=function(e){var t=e.children,r=e.hasErrors,n=e.errors,c=e.retry,o=e.isFetching;return r?(console.log(n),Object(L.jsxs)("div",{className:q.a.errorBlock,children:[Object(L.jsx)("h3",{children:"Something went wrong..."}),Object(L.jsx)("button",{className:q.a.retryBtn,onClick:function(){return c()},style:{cursor:o?"progress":"pointer"},children:o?"Retrying...":"Retry?"}),Object(L.jsx)("code",{className:q.a.errorMsg,children:(null===n||void 0===n?void 0:n.message)||404===(null===n||void 0===n?void 0:n.originalStatus)?"Connection to server cannot be reached.":n.error})]})):Object(L.jsx)(L.Fragment,{children:t})},X=r(71),Z=function(e){var t=k((function(e){return e.controls.search})),r=Object(X.a)(!1),n=Object(F.a)(r,2);n[0],n[1],C(),y(t.current);return Object(L.jsx)(L.Fragment,{children:Object(L.jsx)("div",{className:"search-bar"})})},D=function(){var e,t,r=k((function(e){return e.controls})),c=r.page,o=r.limit,a=Object(s.g)(),l=H.a.parse(a.search.slice(1)).page,u=k((function(e){return e.controls.blur})),d=_(),j=Object(F.a)(d,2),b=j[0],m=j[1],x=C();return Object(n.useEffect)((function(){b({page:l?Number(l):c.current,limit:o})}),[l]),Object(n.useEffect)((function(){var e,t,r,n,o,a,s,i,u,d;x(f({current:l?Number(l):c.current,next:"number"===typeof(null===(e=m.data)||void 0===e?void 0:e.next)?null===(t=m.data)||void 0===t?void 0:t.next:c.next,prev:"number"===typeof(null===(r=m.data)||void 0===r?void 0:r.prev)?null===(n=m.data)||void 0===n?void 0:n.prev:c.prev,last:"number"===typeof(null===(o=m.data)||void 0===o?void 0:o.last)?null===(a=m.data)||void 0===a?void 0:a.last:c.last,first:"number"===typeof(null===(s=m.data)||void 0===s?void 0:s.first)?null===(i=m.data)||void 0===i?void 0:i.first:c.first,total:"number"===typeof(null===(u=m.data)||void 0===u?void 0:u.total)?null===(d=m.data)||void 0===d?void 0:d.total:c.total}))}),[m.data,l]),Object(L.jsxs)("div",{id:"main",children:[Object(L.jsxs)("div",{className:q.a.header_flex,children:[Object(L.jsx)("h1",{className:"logo",children:Object(L.jsx)(i.b,{to:"/",children:Object(L.jsx)("div",{children:"Reader"})})}),Object(L.jsxs)("div",{className:"btn-flex",children:[Object(L.jsxs)("button",{onClick:function(){return b({refresh:!0,page:l?Number(l):c.current,limit:o})},className:q.a.refresh_btn,children:[Object(L.jsx)(S.a,{fontSize:"1.2rem"}),Object(L.jsx)("div",{children:"Refresh"})]}),Object(L.jsxs)("button",{onClick:function(){return b({_updateCovers:!0,page:l?Number(l):c.current,limit:o})},className:q.a.refresh_btn,children:[Object(L.jsx)(S.a,{fontSize:"1.2rem"}),Object(L.jsx)("div",{children:"Covers"})]}),Object(L.jsxs)("button",{onClick:function(){return x(h())},className:E()("is-blur-check",q.a.refresh_btn),children:[Object(L.jsx)("input",{type:"checkbox",checked:u,onChange:function(){return x(h())}}),Object(L.jsx)("div",{children:"Blur"})]})]})]}),Object(L.jsx)(Z,{}),Object(L.jsx)(U,{retry:function(){return b()},hasErrors:m.isError,errors:m.error,isFetching:m.isFetching,children:Object(L.jsx)(T,{total:null===m||void 0===m||null===(e=m.data)||void 0===e?void 0:e.items.length,data:null===m||void 0===m||null===(t=m.data)||void 0===t?void 0:t.items,loading:m.isFetching,refetch:b})})]})},I=r(72),W=r(41),Y=r(42),K=r.p+"static/media/404.6a579c40.jpg",$=function(e){var t=e.panelImg;return Object(L.jsx)("div",{className:"panel",children:Object(L.jsx)(Y.a,{src:"/".concat(t.path),alt:t.name,error:K,style:t?{}:{background:"#444",height:"500px"}})})},ee=function(e){var t=e.manga,r=e.zoomValue,n=void 0===r?5:r,c=(e.brightVal,C());return Object(L.jsxs)("header",{children:[Object(L.jsx)("h2",{className:"logo",children:(null===t||void 0===t?void 0:t.name)||"..."}),Object(L.jsxs)("nav",{children:[Object(L.jsx)("div",{className:"bright-control",children:Object(L.jsx)("button",{children:Object(L.jsx)(z.g,{fontSize:"1.1rem"})})}),Object(L.jsxs)("div",{className:"zoom-control",children:[Object(L.jsx)("button",{type:"button",onClick:function(){return c(b(n>1?n-1:1))},children:Object(L.jsx)(z.h,{})}),Object(L.jsx)("input",{type:"text",value:n,contentEditable:"false"}),Object(L.jsx)("button",{type:"button",onClick:function(){return c(b(n<10?n+1:10))},children:Object(L.jsx)(z.i,{})})]})]})]})},te=r(35),re=function(){var e,t=Object(I.a)("id")||"",r=p(Number(t)),c=r.data,o=r.isLoading,a=r.error,s=r.refetch,i=r.isFetching,l=r.isError,u=k((function(e){return e.controls})),d=700*(u.zoom/10+.5),j=te.a.create({main:{filter:"brightness(".concat(u.brightness,"%)"),maxWidth:"".concat(d,"px"),transition:"0.3s"}});return Object(n.useEffect)((function(){o?document.title="Loading...":c&&(document.title=null===c||void 0===c?void 0:c.name)})),Object(n.useEffect)((function(){window.scroll({top:0,left:0})}),[]),Object(L.jsxs)("div",{className:"manga-container",children:[o&&Object(L.jsx)(R,{}),Object(L.jsx)(U,{hasErrors:l,errors:a,retry:s,isFetching:i,children:Object(L.jsxs)("div",{className:"wrapper",children:[!o&&Object(L.jsx)(W.a,{height:"5px",bgColor:"#1c2122",top:"30px",color:"#50d8d7"}),Object(L.jsx)(ee,{manga:c,zoomValue:u.zoom,brightVal:u.brightness}),Object(L.jsx)("div",{className:Object(te.b)(j.main),id:"viewer",children:!o&&(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.map((function(e,t){return Object(L.jsx)($,{panelImg:e},t)})))})]})})]})},ne=function(){return Object(L.jsxs)("div",{className:q.a.NotFoundBlock,children:[Object(L.jsx)("h1",{children:"404 Not Found"}),Object(L.jsx)("code",{className:q.a.NotFoundCodeBlock,children:"The Page you're looking for isn't here :P."}),Object(L.jsx)(i.b,{className:q.a.GoHomeLink,to:"/",children:"Go Home Now"})]})},ce=(r(68),function(){return Object(L.jsxs)(s.c,{children:[Object(L.jsx)(s.a,{exact:!0,path:"/",component:D}),Object(L.jsx)(s.a,{path:"/manga",component:re}),Object(L.jsx)(s.a,{component:ne})]})}),oe=(r(69),function(){return Object(L.jsx)("footer",{children:Object(L.jsxs)("p",{className:q.a.p_overflow,children:["Thanks for Reading my manga reader ",Object(L.jsx)(z.f,{fontSize:"1.2rem"})]})})}),ae=function(){var e=Object(s.g)(),t=Object(s.f)();return Object(L.jsxs)("div",{className:q.a.StickyBar,children:[Object(L.jsx)("button",{onClick:function(){return window.scroll({behavior:"smooth",top:0,left:0})},children:Object(L.jsx)(z.e,{fontSize:"3rem"})}),"/"!==e.pathname.trim()&&Object(L.jsx)("a",{onClick:function(){return t.goBack()},children:"Go Back"})]})};o.a.render(Object(L.jsx)(i.a,{children:Object(L.jsxs)(a.a,{store:B,children:[Object(L.jsx)(ce,{}),Object(L.jsx)(ae,{}),Object(L.jsx)(oe,{})]})}),document.querySelector("#container"))}},[[70,1,2]]]);
//# sourceMappingURL=main.4cc0bd74.chunk.js.map