(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{120:function(e,t,n){e.exports={TopComponent:"TopComponent_TopComponent__dAKjL"}},121:function(e,t,n){e.exports={p_overflow:"Footer_p_overflow__1CB30"}},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){"use strict";n.r(t);n(122);var a,r,c,s,i=n(3),o=n(44),l=n.n(o),d=n(17),j=n(19),b=n(20),h=n(14),u=n(15),m=n(86),x=n(5),O=function(e){var t=e.item;return Object(x.jsxs)(d.b,{className:"flex-item",title:t.name,to:"/manga?id=".concat(t.id),children:[Object(x.jsx)("img",{className:"bg-img",src:t.cover}),Object(x.jsx)("div",{className:"description",children:Object(x.jsx)("p",{children:t.name})})]})},p=n(48),g=n(111),_=n.n(g),f=n(112),v=n.n(f),N=n(113),y=n.n(N),k=n(41),C=n.n(k),w=function(e){var t=y.a.parse(window.location.search.slice(1)),n=v.a.chunk(e.data,10),a={text:Object(p.useSpring)({from:{opacity:1},opacity:0,loop:{reverse:!0},reset:!0})},r=function(e){if(t.p_index){if(Number(t.p_index)<n.length&&e===Number(t.p_index))return!0;if(t.p_index.match(/last/i)&&e===n.length-1)return!0;if(t.p_index.match(/first/i)&&0===e)return!0}else if(0===e)return!0;return!1};return Object(x.jsxs)("div",{className:"main-reader",children:[Object(x.jsxs)("div",{className:"nav",children:[t.p_index&&0!==Number(t.p_index)?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{to:"/?p_index=0",children:Object(x.jsx)("button",{disabled:r(0),className:"prev",children:Object(x.jsx)(b.a,{})})}),Object(x.jsx)(d.b,{to:"/?p_index=".concat(Number(t.p_index)-1),children:Object(x.jsx)("button",{disabled:r(0),className:"prev",children:Object(x.jsx)(b.c,{})})})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{disabled:r(0),className:"prev",children:Object(x.jsx)(b.a,{})}),Object(x.jsx)("button",{disabled:!0,className:"prev",children:Object(x.jsx)(b.c,{})})]}),Number(t.p_index||0)!==n.length-1?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.b,{to:"/?p_index=".concat(Number(t.p_index||0)+1),children:Object(x.jsx)("button",{disabled:t.p_index&&Number(t.p_index)===n.length-1,className:"next",children:Object(x.jsx)(b.d,{})})}),Object(x.jsx)(d.b,{to:"/?p_index=".concat(n.length-1),children:Object(x.jsx)("button",{disabled:t.p_index&&Number(t.p_index)===n.length-1,className:"next",children:Object(x.jsx)(b.b,{})})})]}):Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{disabled:t.p_index&&Number(t.p_index)===n.length-1,className:"next",children:Object(x.jsx)(b.d,{})}),Object(x.jsx)("button",{disabled:t.p_index&&Number(t.p_index)===n.length-1,className:"next",children:Object(x.jsx)(b.b,{})})]})]}),Object(x.jsx)("div",{className:"main-reader-box",children:!e.loading&&e.data?Object(x.jsx)("div",{className:_()("main-reader-flex","current"),children:n[t.p_index?Number(t.p_index):0].map((function(e){return Object(x.jsx)(O,{item:e},e.id)}))}):Object(x.jsx)("div",{className:C.a.loading_style,children:Object(x.jsx)("h3",{children:Object(x.jsx)(p.animated.span,{style:a.text,children:"Loading..."})})})})]})},S=n(70),B=n.n(S),q=function(e){var t=e.children,n=e.hasErrors,a=e.errors,r=e.retry,c=(e.loading,e.status);return n?(console.log(n),Object(x.jsxs)("div",{className:B.a.errorBlock,children:[Object(x.jsx)("h3",{children:"Something went wrong..."}),Object(x.jsx)("button",{className:B.a.retryBtn,onClick:function(){return r()},style:{cursor:4===c?"progress":"pointer"},children:4===c?"Retrying...":"Retry?"}),Object(x.jsx)("code",{className:B.a.errorMsg,children:a.message})]})):t},F=n(58),z=Object(j.gql)(a||(a=Object(F.a)(["\nquery AllMangas($refresh: Boolean, $slice: Int, $limit: Int) {\n  list: mangas(refresh: $refresh, cursor: $slice, limit: $limit) {\n    id\n    name\n    pathname\n    createdAt\n    size\n    cover\n  }\n  total\n}\n"]))),A=Object(j.gql)(r||(r=Object(F.a)(["\nquery getManga($id: ID!) {\n   manga(id: $id) {\n      id\n      name\n      pathname\n      createdAt\n      size\n      data {\n         name\n         path\n      }\n   }\n}\n"]))),L=Object(j.gql)(c||(c=Object(F.a)(["\nquery SearchManga($s: String){\n  search(term: $s) {\n    id\n    name\n    cover\n  }\n}\n"]))),E=Object(j.gql)(s||(s=Object(F.a)(["\nquery {\n  update\n}\n"]))),I=function(){var e=Object(j.useQuery)(z,{partialRefetch:!0,notifyOnNetworkStatusChange:!0}),t=Object(i.useState)({isSearched:!1,data:null}),n=Object(u.a)(t,2),a=n[0],r=n[1],c=Object(j.useLazyQuery)(E),s=Object(u.a)(c,1)[0],o=Object(j.useLazyQuery)(L,{variables:{s:""}}),l=Object(u.a)(o,2),b=l[0],h=l[1];return Object(i.useEffect)((function(){h.called&&!h.loading&&h.data&&h.data.search&&r({isSearched:!0,data:h.data.search})}),[h.called,h.loading,h.data]),Object(x.jsxs)("div",{id:"main",children:[Object(x.jsxs)("div",{className:C.a.header_flex,children:[Object(x.jsx)("h1",{className:"logo",children:Object(x.jsx)(d.b,{to:"/",style:{color:"white"},children:Object(x.jsx)("div",{children:"Reader"})})}),Object(x.jsxs)("div",{className:"btn-flex",children:[Object(x.jsxs)("button",{onClick:function(){return e.refetch({refresh:!0})},className:C.a.refresh_btn,children:[Object(x.jsx)(m.a,{fontSize:"1.2rem"}),Object(x.jsx)("span",{children:"Refresh"})]}),Object(x.jsxs)("button",{onClick:function(){return s()},className:C.a.refresh_btn,children:[Object(x.jsx)(m.a,{fontSize:"1.2rem"}),Object(x.jsx)("span",{children:"Covers"})]})]})]}),Object(x.jsxs)("div",{className:"search-bar",children:[Object(x.jsx)("input",{type:"text",name:"search",placeholder:"Search...",onChange:function(e){if(!e.target.value)return r({isSearched:!1,data:null});b({variables:{s:e.target.value}})},onBlur:function(){return r({isSearched:!1,data:null})}}),a.isSearched&&Object(x.jsx)("div",{className:"search-list",children:a.data&&a.data.map((function(e){return Object(x.jsxs)(d.b,{to:"/manga?id=".concat(e.id),className:"search-item",title:e.name,children:[Object(x.jsx)("div",{className:"cover-img",style:{backgroundImage:"url('".concat(e.cover,"')"),backgroundSize:"cover",backgroundPosition:"center",minWidth:"3rem",height:"4rem",backgroundColor:"#444"}}),Object(x.jsx)("div",{className:"name",children:e.name})]})}))})]}),Object(x.jsx)(q,{status:e.networkStatus,loading:e.loading,retry:e.refetch,hasErrors:e.error&&!0,errors:e.error,children:Object(x.jsx)(w,{total:!e.loading&&e.data&&e.data.total,data:!e.loading&&e.data&&e.data.list,loading:e.loading,refetch:e.refetch})})]})},$=n(153),M=n(87),R=n(117),T=n(118),V=n.p+"static/media/404.6a579c40.jpg",P=function(e){var t=e.panelImg;return Object(x.jsx)("div",{className:"panel",children:Object(x.jsx)(T.a,{src:"/".concat(t.path),alt:t.name,error:V,style:t?{}:{background:"#444",height:"500px"}})})},G=n(119),H=function(e){var t=e.manga,n=e.zoomValue,a=e.brightVal,r=e.setBright,c=e.setZoomVal;return Object(x.jsxs)("header",{children:[Object(x.jsx)("h2",{className:"logo",children:t?t.name:"..."}),Object(x.jsxs)("nav",{children:[Object(x.jsxs)("div",{className:"bright-control",children:[Object(x.jsx)("span",{children:a}),Object(x.jsx)("input",{type:"range",min:"0",max:"100",onChange:function(e){return r(e.target.value)},value:a})]}),Object(x.jsxs)("div",{className:"zoom-control",children:[Object(x.jsx)("button",{type:"button",onClick:function(){return c(n>1?n-1:1)},children:Object(x.jsx)(b.g,{})}),Object(x.jsx)("input",{type:"text",onChange:function(e){return e.target.value<=10&e.target.value>0&&c(e.target.value)},value:n}),Object(x.jsx)("button",{type:"button",onClick:function(){return c(n<10?n+1:10)},children:Object(x.jsx)(b.h,{})})]})]})]})};H.defaultProps={manga:{name:"",data:[]}};var Q=H,U=G.animateScroll,J=function(){var e=Object(h.f)(),t=new URLSearchParams(e.search).get("id"),n=Object(j.useQuery)(A,{variables:{id:t}}),a=n.loading,r=n.data,c=n.error,s=n.refetch,o=Object($.a)("zoomValue",5),l=Object(u.a)(o,2),d=l[0],b=l[1],m=Object($.a)("brightValue",100),O=Object(u.a)(m,2),g=O[0],_=O[1],f={text:Object(p.useSpring)({from:{opacity:1},opacity:0,loop:{reverse:!0},reset:a})},v=M.a.create({brightnessAdjust:{filter:"brightness(".concat(g,"%)")},widthAdjust:{maxWidth:"".concat(700*(d/10+.5),"px"),transition:"0.3s"}});return Object(i.useEffect)((function(){document.title=a?"Loading...":r.manga.name})),Object(i.useEffect)((function(){U.scrollToTop()}),[]),Object(x.jsxs)("div",{children:[a&&Object(x.jsx)("div",{className:C.a.loading_style,children:Object(x.jsx)("h3",{children:Object(x.jsx)(p.animated.span,{style:f.text,children:"Loading..."})})}),Object(x.jsx)(q,{hasErrors:c&&!0,errors:c,retry:s,children:Object(x.jsxs)("div",{className:"wrapper",children:[!a&&Object(x.jsx)(R.a,{height:"3px",top:"30px",color:"#546",bgColor:"#aae"}),Object(x.jsx)(Q,{manga:!a&&r.manga,zoomValue:d,brightVal:g,setBright:_,setZoomVal:b}),Object(x.jsx)("div",{className:Object(M.b)(v.brightnessAdjust,v.widthAdjust),id:"viewer",children:!a&&r.manga.data.map((function(e,t){return Object(x.jsx)(P,{panelImg:e},t)}))})]})})]})},W=n(71),Z=n.n(W),D=function(){return Object(x.jsxs)("div",{className:Z.a.NotFoundBlock,children:[Object(x.jsx)("h1",{children:"404 Not Found"}),Object(x.jsx)("code",{className:Z.a.NotFoundCodeBlock,children:"The Page you're looking for isn't here :P."}),Object(x.jsx)(d.b,{className:Z.a.GoHomeLink,to:"/",children:"Go Home Now"})]})},K=(n(149),function(){return Object(x.jsxs)(h.c,{children:[Object(x.jsx)(h.a,{exact:!0,path:"/",component:I}),Object(x.jsx)(h.a,{path:"/manga",component:J}),Object(x.jsx)(h.a,{component:D})]})}),X=n(120),Y=n.n(X),ee=(n(150),n(121)),te=n.n(ee),ne=function(){return Object(x.jsx)("footer",{children:Object(x.jsxs)("p",{className:te.a.p_overflow,children:["Thanks for Reading my manga reader ",Object(x.jsx)(b.f,{fontSize:"1.2rem"})]})})},ae=new j.ApolloClient({uri:"/api/ql",cache:new j.InMemoryCache}),re=function(){return Object(x.jsx)("button",{className:Y.a.TopComponent,onClick:function(){return window.scroll({behavior:"smooth",top:0,left:0})},children:Object(x.jsx)(b.e,{fontSize:"2rem"})})};l.a.render(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{children:Object(x.jsx)(j.ApolloProvider,{client:ae,children:Object(x.jsx)(K,{})})}),Object(x.jsx)(re,{}),Object(x.jsx)(ne,{})]}),document.querySelector("#container"))},41:function(e,t,n){e.exports={loading_style:"main_loading_style__1Lm1M",header_flex:"main_header_flex__1ylRE",refresh_btn:"main_refresh_btn__2iuFG",search_bar:"main_search_bar__3gPIp",marquee:"main_marquee__2wxIU",marquee_child:"main_marquee_child__1H3UN",marquee_animation:"main_marquee_animation__1jq5F"}},70:function(e,t,n){e.exports={errorMsg:"ErrorBlock_errorMsg__1O09I",errorBlock:"ErrorBlock_errorBlock__39bVM",retryBtn:"ErrorBlock_retryBtn__1YTZ1"}},71:function(e,t,n){e.exports={NotFoundBlock:"404_NotFoundBlock___Xqa0",NotFoundCodeBlock:"404_NotFoundCodeBlock__2WCRk",GoHomeLink:"404_GoHomeLink__J-AUj"}}},[[151,1,2]]]);
//# sourceMappingURL=main.bundle.chunk.js.map