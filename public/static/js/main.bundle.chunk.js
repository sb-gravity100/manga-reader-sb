(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{118:function(e,t,n){e.exports={TopComponent:"TopComponent_TopComponent__dAKjL"}},119:function(e,t,n){e.exports={p_overflow:"Footer_p_overflow__1CB30"}},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){"use strict";n.r(t);n(120);var a,r,c,s,i=n(3),o=n(44),l=n.n(o),d=n(24),j=n(18),b=n(32),u=n(14),h=n(15),m=n(86),x=n(5),O=function(e){var t=e.item;return Object(x.jsxs)(d.b,{className:"flex-item",title:t.name,to:"/manga?id=".concat(t.id),children:[Object(x.jsx)("img",{className:"bg-img",src:t.cover}),Object(x.jsx)("div",{className:"description",children:Object(x.jsx)("p",{children:t.name})})]})},p=n(48),g=n(109),f=n.n(g),_=n(110),v=n(111),N=n.n(v),y=n(41),k=n.n(y),C=function(e){var t=_.parse(Object(u.f)().search.slice(1)),n=N.a.chunk(e.data,10),a={text:Object(p.useSpring)({from:{opacity:1},opacity:0,loop:{reverse:!0},reset:!0})};return Object(x.jsxs)("div",{className:"main-reader",children:[Object(x.jsxs)("div",{className:"nav",children:[t.p_index&&0!==Number(t.p_index)?Object(x.jsx)(d.b,{to:"/?p_index=".concat(Number(t.p_index)-1),children:Object(x.jsx)("button",{disabled:function(e){if(t.p_index){if(Number(t.p_index)<n.length&&e===Number(t.p_index))return!0;if(t.p_index.match(/last/i)&&e===n.length-1)return!0;if(t.p_index.match(/first/i)&&0===e)return!0}else if(0===e)return!0;return!1}(0),className:"prev",children:Object(x.jsx)(b.a,{})})}):Object(x.jsx)("button",{disabled:!0,className:"prev",children:Object(x.jsx)(b.a,{})}),Number(t.p_index||0)!==n.length-1?Object(x.jsx)(d.b,{to:"/?p_index=".concat(Number(t.p_index||0)+1),children:Object(x.jsx)("button",{disabled:t.p_index&&Number(t.p_index)===n.length-1,className:"next",children:Object(x.jsx)(b.b,{})})}):Object(x.jsx)("button",{disabled:t.p_index&&Number(t.p_index)===n.length-1,className:"next",children:Object(x.jsx)(b.b,{})})]}),Object(x.jsx)("div",{className:"main-reader-box",children:!e.loading&&e.data?Object(x.jsx)("div",{className:f()("main-reader-flex","current"),children:n[t.p_index?Number(t.p_index):0].map((function(e){return Object(x.jsx)(O,{item:e},e.id)}))}):Object(x.jsx)("div",{className:k.a.loading_style,children:Object(x.jsx)("h3",{children:Object(x.jsx)(p.animated.span,{style:a.text,children:"Loading..."})})})})]})},S=n(70),w=n.n(S),B=function(e){var t=e.children,n=e.hasErrors,a=e.errors,r=e.retry,c=(e.loading,e.status);return n?(console.log(n),Object(x.jsxs)("div",{className:w.a.errorBlock,children:[Object(x.jsx)("h3",{children:"Something went wrong..."}),Object(x.jsx)("button",{className:w.a.retryBtn,onClick:function(){return r()},style:{cursor:4===c?"progress":"pointer"},children:4===c?"Retrying...":"Retry?"}),Object(x.jsx)("code",{className:w.a.errorMsg,children:a.message})]})):t},q=n(58),z=Object(j.gql)(a||(a=Object(q.a)(["\nquery AllMangas($refresh: Boolean, $slice: Int, $limit: Int) {\n  list: mangas(refresh: $refresh, cursor: $slice, limit: $limit) {\n    id\n    name\n    pathname\n    createdAt\n    size\n    cover\n  }\n  total\n}\n"]))),A=Object(j.gql)(r||(r=Object(q.a)(["\nquery getManga($id: ID!) {\n   manga(id: $id) {\n      id\n      name\n      pathname\n      createdAt\n      size\n      data {\n         name\n         path\n      }\n   }\n}\n"]))),F=Object(j.gql)(c||(c=Object(q.a)(["\nquery SearchManga($s: String){\n  search(term: $s) {\n    id\n    name\n    cover\n  }\n}\n"]))),L=Object(j.gql)(s||(s=Object(q.a)(["\nquery {\n  update\n}\n"]))),E=function(){var e=Object(j.useQuery)(z,{partialRefetch:!0,notifyOnNetworkStatusChange:!0}),t=Object(i.useState)({isSearched:!1,data:null}),n=Object(h.a)(t,2),a=n[0],r=n[1],c=Object(j.useLazyQuery)(L),s=Object(h.a)(c,1)[0],o=Object(j.useLazyQuery)(F,{variables:{s:""}}),l=Object(h.a)(o,2),b=l[0],u=l[1];return Object(i.useEffect)((function(){u.called&&!u.loading&&u.data&&u.data.search&&r({isSearched:!0,data:u.data.search})}),[u.called,u.loading,u.data]),Object(x.jsxs)("div",{id:"main",children:[Object(x.jsxs)("div",{className:k.a.header_flex,children:[Object(x.jsx)("h1",{className:"logo",children:Object(x.jsx)(d.b,{to:"/",style:{color:"white"},children:Object(x.jsx)("div",{children:"Reader"})})}),Object(x.jsxs)("div",{className:"btn-flex",children:[Object(x.jsxs)("button",{onClick:function(){return e.refetch({refresh:!0})},className:k.a.refresh_btn,children:[Object(x.jsx)(m.a,{fontSize:"1.2rem"}),Object(x.jsx)("span",{children:"Refresh"})]}),Object(x.jsxs)("button",{onClick:function(){return s()},className:k.a.refresh_btn,children:[Object(x.jsx)(m.a,{fontSize:"1.2rem"}),Object(x.jsx)("span",{children:"Covers"})]})]})]}),Object(x.jsxs)("div",{className:"search-bar",children:[Object(x.jsx)("input",{type:"text",name:"search",placeholder:"Search...",onChange:function(e){if(!e.target.value)return r({isSearched:!1,data:null});b({variables:{s:e.target.value}})},onBlur:function(){return r({isSearched:!1,data:null})}}),a.isSearched&&Object(x.jsx)("div",{className:"search-list",children:a.data&&a.data.map((function(e){return Object(x.jsxs)(d.b,{to:"/manga?id=".concat(e.id),className:"search-item",title:e.name,children:[Object(x.jsx)("div",{className:"cover-img",style:{backgroundImage:"url('".concat(e.cover,"')"),backgroundSize:"cover",backgroundPosition:"center",minWidth:"3rem",height:"4rem",backgroundColor:"#444"}}),Object(x.jsx)("div",{className:"name",children:e.name})]})}))})]}),Object(x.jsx)(B,{status:e.networkStatus,loading:e.loading,retry:e.refetch,hasErrors:e.error&&!0,errors:e.error,children:Object(x.jsx)(C,{total:!e.loading&&e.data&&e.data.total,data:!e.loading&&e.data&&e.data.list,loading:e.loading,refetch:e.refetch})})]})},I=n(151),$=n(87),M=n(115),R=n(116),T=n.p+"static/media/404.6a579c40.jpg",V=function(e){var t=e.panelImg;return Object(x.jsx)("div",{className:"panel",children:Object(x.jsx)(R.a,{src:"/".concat(t.path),alt:t.name,error:T,style:t?{}:{background:"#444",height:"500px"}})})},P=n(117),G=function(e){var t=e.manga,n=e.zoomValue,a=e.brightVal,r=e.setBright,c=e.setZoomVal;return Object(x.jsxs)("header",{children:[Object(x.jsx)("h2",{className:"logo",children:t?t.name:"..."}),Object(x.jsxs)("nav",{children:[Object(x.jsxs)("div",{className:"bright-control",children:[Object(x.jsx)("span",{children:a}),Object(x.jsx)("input",{type:"range",min:"0",max:"100",onChange:function(e){return r(e.target.value)},value:a})]}),Object(x.jsxs)("div",{className:"zoom-control",children:[Object(x.jsx)("button",{type:"button",onClick:function(){return c(n>1?n-1:1)},children:Object(x.jsx)(b.e,{})}),Object(x.jsx)("input",{type:"text",onChange:function(e){return e.target.value<=10&e.target.value>0&&c(e.target.value)},value:n}),Object(x.jsx)("button",{type:"button",onClick:function(){return c(n<10?n+1:10)},children:Object(x.jsx)(b.f,{})})]})]})]})};G.defaultProps={manga:{name:"",data:[]}};var H=G,Q=P.animateScroll,U=function(){var e=Object(u.f)(),t=new URLSearchParams(e.search).get("id"),n=Object(j.useQuery)(A,{variables:{id:t}}),a=n.loading,r=n.data,c=n.error,s=n.refetch,o=Object(I.a)("zoomValue",5),l=Object(h.a)(o,2),d=l[0],b=l[1],m=Object(I.a)("brightValue",100),O=Object(h.a)(m,2),g=O[0],f=O[1],_={text:Object(p.useSpring)({from:{opacity:1},opacity:0,loop:{reverse:!0},reset:a})},v=$.a.create({brightnessAdjust:{filter:"brightness(".concat(g,"%)")},widthAdjust:{maxWidth:"".concat(700*(d/10+.5),"px"),transition:"0.3s"}});return Object(i.useEffect)((function(){document.title=a?"Loading...":r.manga.name})),Object(i.useEffect)((function(){Q.scrollToTop()}),[]),Object(x.jsxs)("div",{children:[a&&Object(x.jsx)("div",{className:k.a.loading_style,children:Object(x.jsx)("h3",{children:Object(x.jsx)(p.animated.span,{style:_.text,children:"Loading..."})})}),Object(x.jsx)(B,{hasErrors:c&&!0,errors:c,retry:s,children:Object(x.jsxs)("div",{className:"wrapper",children:[!a&&Object(x.jsx)(M.a,{height:"3px",top:"30px",color:"#546",bgColor:"#aae"}),Object(x.jsx)(H,{manga:!a&&r.manga,zoomValue:d,brightVal:g,setBright:f,setZoomVal:b}),Object(x.jsx)("div",{className:Object($.b)(v.brightnessAdjust,v.widthAdjust),id:"viewer",children:!a&&r.manga.data.map((function(e,t){return Object(x.jsx)(V,{panelImg:e},t)}))})]})})]})},J=n(71),W=n.n(J),Z=function(){return Object(x.jsxs)("div",{className:W.a.NotFoundBlock,children:[Object(x.jsx)("h1",{children:"404 Not Found"}),Object(x.jsx)("code",{className:W.a.NotFoundCodeBlock,children:"The Page you're looking for isn't here :P."}),Object(x.jsx)(d.b,{className:W.a.GoHomeLink,to:"/",children:"Go Home Now"})]})},D=(n(147),function(){return Object(x.jsxs)(u.c,{children:[Object(x.jsx)(u.a,{exact:!0,path:"/",component:E}),Object(x.jsx)(u.a,{path:"/manga",component:U}),Object(x.jsx)(u.a,{component:Z})]})}),K=n(118),X=n.n(K),Y=(n(148),n(119)),ee=n.n(Y),te=function(){return Object(x.jsx)("footer",{children:Object(x.jsxs)("p",{className:ee.a.p_overflow,children:["Thanks for Reading my manga reader ",Object(x.jsx)(b.d,{fontSize:"1.2rem"})]})})},ne=new j.ApolloClient({uri:"/api/ql",cache:new j.InMemoryCache}),ae=function(){return Object(x.jsx)("button",{className:X.a.TopComponent,onClick:function(){return window.scroll({behavior:"smooth",top:0,left:0})},children:Object(x.jsx)(b.c,{fontSize:"2rem"})})};l.a.render(Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(d.a,{children:Object(x.jsx)(j.ApolloProvider,{client:ne,children:Object(x.jsx)(D,{})})}),Object(x.jsx)(ae,{}),Object(x.jsx)(te,{})]}),document.querySelector("#container"))},41:function(e,t,n){e.exports={loading_style:"main_loading_style__1Lm1M",header_flex:"main_header_flex__1ylRE",refresh_btn:"main_refresh_btn__2iuFG",search_bar:"main_search_bar__3gPIp",marquee:"main_marquee__2wxIU",marquee_child:"main_marquee_child__1H3UN",marquee_animation:"main_marquee_animation__1jq5F"}},70:function(e,t,n){e.exports={errorMsg:"ErrorBlock_errorMsg__1O09I",errorBlock:"ErrorBlock_errorBlock__39bVM",retryBtn:"ErrorBlock_retryBtn__1YTZ1"}},71:function(e,t,n){e.exports={NotFoundBlock:"404_NotFoundBlock___Xqa0",NotFoundCodeBlock:"404_NotFoundCodeBlock__2WCRk",GoHomeLink:"404_GoHomeLink__J-AUj"}}},[[149,1,2]]]);
//# sourceMappingURL=main.bundle.chunk.js.map