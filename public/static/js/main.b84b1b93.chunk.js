(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{69:function(e,t){},7:function(e,t,n){e.exports={scroll_btn:"style_scroll_btn__2DVon",center:"style_center__2ktxo",header:"style_header__QLGaS",flex_column:"style_flex_column__2GipV",transitionize:"style_transitionize__2Cutg",NotFoundBlock:"style_NotFoundBlock__3nBZt",NotFoundCodeBlock:"style_NotFoundCodeBlock__3eTYR",GoHomeLink:"style_GoHomeLink__FUFnD",errorMsg:"style_errorMsg__3EXXt",errorBlock:"style_errorBlock__2rrBe",retryBtn:"style_retryBtn__obQzX",p_overflow:"style_p_overflow__2lbNJ",loading_style:"style_loading_style__Q5HdP",header_flex:"style_header_flex__BGuEN",logo:"style_logo__1aLeU",refresh_btn:"style_refresh_btn__3OP8f",StickyBar:"style_StickyBar__2JC9z"}},88:function(e,t,n){},89:function(e,t,n){},90:function(e,t,n){"use strict";n.r(t);n(48);var r=n(1),c=n(26),o=n.n(c),a=n(8),s=n(6),i=n(15),l=n(28),u=n(3),d=Object(u.d)({initialState:{blur:!0,zoom:5,page:{current:0},limit:10,brightness:!0,search:{current:""}},name:"control",reducers:{setZoom:function(e,t){e.zoom=t.payload},toggleBrightness:function(e){e.brightness=!e.brightness},setSearch:function(e,t){e.search={prev:e.search.current||e.search.prev,current:t.payload}},toggleBlur:function(e){e.blur=!e.blur},toggleRefresh:function(e){e.refresh=!e.refresh},toggleCovers:function(e){e._updateCovers=!e._updateCovers},setPage:function(e,t){t&&(e.page=t.payload)},gotoPage:function(e,t){e.page.current=t.payload>e.page.total-1?9:t.payload<0?0:t.payload},toggleScroll:function(e){e.scrollDown=!e.scrollDown}}}),j=d.actions,b=j.setZoom,h=j.toggleScroll,f=j.toggleBrightness,m=j.setSearch,g=j.toggleBlur,O=(j.toggleCovers,j.toggleRefresh,j.setPage),x=(j.gotoPage,d.reducer),v=n(40),p=n(10),y=Object(v.a)({reducerPath:"MangaApi",baseQuery:Object(p.d)({baseUrl:"/api"}),endpoints:function(e){return{allMangas:e.query({query:function(e){return{url:"/mangas",params:e||{page:0,limit:10}}}}),getManga:e.query({query:function(e){return{url:"/manga",params:{id:e}}}}),search:e.query({query:function(e){return"/search?q=".concat(e||"")}})}}}),_=y,N=(y.useAllMangasQuery,y.useGetMangaQuery),k=(y.useLazySearchQuery,y.useSearchQuery),C=y.useLazyAllMangasQuery,B=(y.useLazyGetMangaQuery,y.usePrefetch,Object(u.a)({reducer:Object(l.a)({controls:x},_.reducerPath,_.reducer),middleware:function(e){return e().concat(_.middleware)}})),S=a.e,F=function(){return Object(a.d)()},z=B,w=n(18),E=n(41),L=n(19),P=n(17),G=n(21),M=n.n(G),Q=n(2),q=function(e){var t=e.item,n=S((function(e){return e.controls.blur}));return Object(Q.jsxs)(i.b,{className:"flex-item",title:t.name,to:"/manga?id=".concat(t.id),children:[Object(Q.jsx)("img",{className:M()("bg-img",n?"blur-img":"non-blur-img"),src:t.cover||void 0}),Object(Q.jsx)("div",{className:"description",children:Object(Q.jsx)("p",{children:t.name})})]})},R=n(23),D=n.n(R),H=n(7),I=n.n(H),J=function(){return Object(Q.jsx)("div",{className:I.a.loading_style,children:Object(Q.jsx)("h3",{children:Object(Q.jsx)("div",{className:"loading-animation",children:"Loading..."})})})},A=n(24),T=n.n(A),U=D.a.curry((function(e,t,n){for(var r=[],c=[],o=e;o<t-1&&o<e+n;o++)r.push(o+1);for(var a=e;a>0&&a>e-n;a--)c.push(a-1);return{next:r,prev:c.reverse()}})),V=function(e){var t=Object(s.f)(),n=Object(s.g)(),c=S((function(e){return e.controls})),o=c.page,a=(c.limit,Object(r.useState)(U(Number(o.current),o.total,2))),i=Object(L.a)(a,2),l=i[0],u=i[1],d=function(e){var r=T.a.parse(n.search.slice(1));t.push({search:"?"+T.a.stringify(Object.assign(r,{page:e}))})};return Object(r.useEffect)((function(){o.current===o.total-1||0===o.current?u(U(Number(o.current),o.total,4)):o.total-1-o.current===1||1===o.current?u(U(Number(o.current),o.total,3)):u(U(Number(o.current),o.total,2))}),[o]),Object(Q.jsxs)("div",{className:"nav",children:[Object(Q.jsx)("button",{disabled:"number"!==typeof o.first||o.current===o.first,onClick:function(){return d(o.first)},children:Object(Q.jsx)(w.a,{})}),Object(Q.jsx)("button",{disabled:"number"!==typeof o.prev||o.current===o.first,onClick:function(){return d(o.prev)},children:Object(Q.jsx)(w.c,{})}),l.prev.map((function(e){return Object(Q.jsx)("button",{onClick:function(){return d(e)},children:e},e)})),Object(Q.jsx)("button",{className:"current",children:o.current}),l.next.map((function(e){return Object(Q.jsx)("button",{onClick:function(){return d(e)},children:e},e)})),Object(Q.jsx)("button",{disabled:"number"!==typeof o.next||o.current===o.last,onClick:function(){return d(o.next)},children:Object(Q.jsx)(w.d,{})}),Object(Q.jsx)("button",{disabled:"number"!==typeof o.last||o.current===o.last,onClick:function(){return d(o.last)},children:Object(Q.jsx)(w.b,{})})]})},X=function(e){var t,n=S((function(e){return e.controls}));D.a.times(10,(function(e){return{value:e+5,label:e+5}}));return Object(Q.jsxs)("div",{className:"main-reader",children:["number"===typeof n.page.total&&Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsx)(V,{refetch:e.refetch})}),Object(Q.jsx)("div",{className:"main-reader-box",children:!e.loading&&e.data?Object(Q.jsx)("div",{className:M()("main-reader-flex","current"),children:null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(Q.jsx)(q,{item:e},e.id)}))}):Object(Q.jsx)(J,{})})]})},Z=function(e){var t=e.children,n=e.hasErrors,r=e.errors,c=e.retry,o=e.isFetching;return n?(console.log(r),Object(Q.jsxs)("div",{className:I.a.errorBlock,children:[Object(Q.jsx)("h3",{children:"Something went wrong..."}),Object(Q.jsx)("button",{className:I.a.retryBtn,onClick:function(){return c()},style:{cursor:o?"progress":"pointer"},children:o?"Retrying...":"Retry?"}),Object(Q.jsx)("code",{className:I.a.errorMsg,children:(null===r||void 0===r?void 0:r.message)||404===(null===r||void 0===r?void 0:r.originalStatus)?"Connection to server cannot be reached.":r.error})]})):Object(Q.jsx)(Q.Fragment,{children:t})},W=n(91),Y=function(e){return Object(Q.jsxs)(i.b,{to:"/manga?id=".concat(e.item.id),className:"search-item",title:e.item.name,onClick:e.clickFunc,children:[Object(Q.jsx)("div",{className:"cover-img",style:{backgroundImage:"url('".concat(e.item.cover,"')")}}),Object(Q.jsx)("div",{className:"name",children:D.a.chunk(e.item.name.split(" "),8).map((function(e,t){return Object(Q.jsx)("p",{children:e.join(" ")},t)}))})]})},K=function(e){var t=S((function(e){return e.controls.search})),n=Object(W.a)(!1),r=Object(L.a)(n,2),c=r[0],o=r[1],a=F(),s=function(e){a(m(""))},i=k(t.current);return Object(Q.jsx)(Q.Fragment,{children:Object(Q.jsxs)("div",{className:"search-bar",children:[Object(Q.jsx)("input",{type:"text",name:"search",placeholder:"Search...",onChange:function(e){a(m(e.target.value))},autoComplete:"off",autoCorrect:"off",onFocus:function(){return o(!0)},onBlur:function(){return o(!1)},defaultValue:t.current||t.prev||""}),!!t.current&&Object(Q.jsxs)("div",{className:"search-list",children:[!!t.current&&i.isFetching&&Object(Q.jsx)("div",{className:"search-loading loading-animation",children:"Loading results..."}),i.isSuccess&&0===i.data.length&&c&&!i.isFetching&&!!t.current&&Object(Q.jsxs)("div",{className:"search-loading",children:["Nothing Found! ",":("]}),i.isSuccess&&i.data.map((function(e){return Object(Q.jsx)(Y,Object(E.a)({clickFunc:s},e),e.item.id)}))]})]})})},$=function(){var e,t,n=S((function(e){return e.controls})),c=n.page,o=n.limit,a=Object(s.g)(),l=T.a.parse(a.search.slice(1)).page,u=C(),d=Object(L.a)(u,2),j=d[0],b=d[1],h=F();return Object(r.useEffect)((function(){j({page:l?Number(l):c.current,limit:o})}),[l]),Object(r.useEffect)((function(){var e,t,n,r,o,a,s,i,u,d;h(O({current:l?Number(l):c.current,next:"number"===typeof(null===(e=b.data)||void 0===e?void 0:e.next)?null===(t=b.data)||void 0===t?void 0:t.next:c.next,prev:"number"===typeof(null===(n=b.data)||void 0===n?void 0:n.prev)?null===(r=b.data)||void 0===r?void 0:r.prev:c.prev,last:"number"===typeof(null===(o=b.data)||void 0===o?void 0:o.last)?null===(a=b.data)||void 0===a?void 0:a.last:c.last,first:"number"===typeof(null===(s=b.data)||void 0===s?void 0:s.first)?null===(i=b.data)||void 0===i?void 0:i.first:c.first,total:"number"===typeof(null===(u=b.data)||void 0===u?void 0:u.total)?null===(d=b.data)||void 0===d?void 0:d.total:c.total}))}),[b.data,l]),Object(Q.jsxs)("div",{id:"main",children:[Object(Q.jsxs)("div",{className:I.a.header_flex,children:[Object(Q.jsx)("h1",{className:"logo",children:Object(Q.jsx)(i.b,{to:"/",children:Object(Q.jsx)("div",{children:"Reader"})})}),Object(Q.jsxs)("div",{className:"btn-flex",children:[Object(Q.jsxs)("button",{onClick:function(){return j({refresh:!0,page:l?Number(l):c.current,limit:o})},className:I.a.refresh_btn,children:[Object(Q.jsx)(P.d,{fontSize:"1.2rem"}),Object(Q.jsx)("div",{children:"Refresh"})]}),Object(Q.jsxs)("button",{onClick:function(){return j({_updateCovers:!0,page:l?Number(l):c.current,limit:o})},className:I.a.refresh_btn,children:[Object(Q.jsx)(P.d,{fontSize:"1.2rem"}),Object(Q.jsx)("div",{children:"Covers"})]}),Object(Q.jsx)("button",{onClick:function(){return h(g())},className:M()("is-blur-check",I.a.refresh_btn),children:Object(Q.jsx)("div",{children:"Blur"})})]})]}),Object(Q.jsx)(K,{}),Object(Q.jsx)(Z,{retry:function(){return j()},hasErrors:b.isError,errors:b.error,isFetching:b.isFetching,children:Object(Q.jsx)(X,{total:null===b||void 0===b||null===(e=b.data)||void 0===e?void 0:e.items.length,data:null===b||void 0===b||null===(t=b.data)||void 0===t?void 0:t.items,loading:b.isFetching,refetch:j})})]})},ee=n(92),te=n(43),ne=n(44),re=n.p+"static/media/404.6a579c40.jpg",ce=function(e){var t=e.panelImg;return Object(Q.jsx)("div",{className:"panel",children:Object(Q.jsx)(ne.a,{src:t.path,alt:t.name,error:re,style:t?{}:{background:"#444",height:"500px"}})})},oe=n(46),ae=n(45),se=n.n(ae),ie=oe.a.utils.snap({values:se()(10,(function(e){return e++})),radius:1}),le=function(e){var t=e.manga,n=Object(r.useState)(),c=Object(L.a)(n,2),o=c[0],a=c[1],s=F(),i=S((function(e){return e.controls})),l=i.zoom,u=i.brightness,d=i.scrollDown;return Object(Q.jsxs)("header",{children:[Object(Q.jsx)("h2",{className:"logo",children:(null===t||void 0===t?void 0:t.name)||"..."}),Object(Q.jsxs)("nav",{children:[Object(Q.jsx)("div",{className:"speed-control",onClick:function(){var e;s(h()),console.log(d),d?a((e=5,setInterval((function(){return scrollBy({top:e,left:0,behavior:"smooth"})}),80))):(clearInterval(o),a(void 0))},children:Object(Q.jsx)("button",{children:d?Object(Q.jsx)(P.c,{}):Object(Q.jsx)(P.e,{})})}),Object(Q.jsx)("div",{className:"bright-control",children:Object(Q.jsx)("button",{onClick:function(){return s(f())},children:u?Object(Q.jsx)(P.a,{fontSize:"1.1rem"}):Object(Q.jsx)(P.b,{fontSize:"1.1rem"})})}),Object(Q.jsxs)("div",{className:"zoom-control",children:[Object(Q.jsx)("button",{type:"button",onClick:function(){return s(b(ie(l-1)))},children:Object(Q.jsx)(P.g,{fontSize:"1.2rem"})}),Object(Q.jsx)("button",{type:"button",onClick:function(){return s(b(ie(l+1)))},children:Object(Q.jsx)(P.f,{fontSize:"1.2rem"})})]})]})]})},ue=n(36),de=function(){var e,t=Object(ee.a)("id")||"",n=N(Number(t)),c=n.data,o=n.isLoading,a=n.error,s=n.refetch,i=n.isFetching,l=n.isError,u=S((function(e){return e.controls})),d=700*(u.zoom/10+.5),j=ue.a.create({main:{filter:u.brightness?"brightness(100%)":"brightness(60%)",maxWidth:"".concat(d,"px"),transition:"0.3s"}});return Object(r.useEffect)((function(){o?document.title="Loading...":c&&(document.title=null===c||void 0===c?void 0:c.name)})),Object(r.useEffect)((function(){window.scroll({top:0,left:0})}),[]),Object(Q.jsxs)("div",{className:"manga-container",children:[o&&Object(Q.jsx)(J,{}),Object(Q.jsx)(Z,{hasErrors:l,errors:a,retry:s,isFetching:i,children:Object(Q.jsxs)("div",{className:"wrapper",children:[!o&&Object(Q.jsx)(te.a,{height:"5px",bgColor:"#1c2122",top:"30px",color:"#50d8d7"}),Object(Q.jsx)(le,{manga:c}),Object(Q.jsx)("div",{className:Object(ue.b)(j.main),id:"viewer",children:!o&&(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.map((function(e,t){return Object(Q.jsx)(ce,{panelImg:e},t)})))})]})})]})},je=function(){return Object(Q.jsxs)("div",{className:I.a.NotFoundBlock,children:[Object(Q.jsx)("h1",{children:"404 Not Found"}),Object(Q.jsx)("code",{className:I.a.NotFoundCodeBlock,children:"The Page you're looking for isn't here :P."}),Object(Q.jsx)(i.b,{className:I.a.GoHomeLink,to:"/",children:"Go Home Now"})]})},be=(n(88),function(){return Object(Q.jsxs)(s.c,{children:[Object(Q.jsx)(s.a,{exact:!0,path:"/",component:$}),Object(Q.jsx)(s.a,{path:"/manga",component:de}),Object(Q.jsx)(s.a,{component:je})]})}),he=(n(89),function(){return Object(Q.jsx)("footer",{children:Object(Q.jsxs)("p",{className:I.a.p_overflow,children:["Thanks for Reading my manga reader ",Object(Q.jsx)(w.f,{fontSize:"1.2rem"})]})})}),fe=function(){var e=Object(s.g)(),t=Object(s.f)();return Object(Q.jsxs)("div",{className:I.a.StickyBar,children:[Object(Q.jsx)("button",{onClick:function(){return window.scroll({behavior:"smooth",top:0,left:0})},children:Object(Q.jsx)(w.e,{fontSize:"3rem"})}),"/"!==e.pathname.trim()&&Object(Q.jsx)("button",{onClick:function(){return t.goBack()},children:"Go Back"})]})};o.a.render(Object(Q.jsx)(i.a,{children:Object(Q.jsxs)(a.a,{store:z,children:[Object(Q.jsx)(be,{}),Object(Q.jsx)(fe,{}),Object(Q.jsx)(he,{})]})}),document.querySelector("#container"))}},[[90,1,2]]]);
//# sourceMappingURL=main.b84b1b93.chunk.js.map