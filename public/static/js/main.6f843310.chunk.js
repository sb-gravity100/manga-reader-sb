(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{112:function(e,t,r){e.exports={scroll_btn:"Manga_scroll_btn__khE-N"}},118:function(e,t,r){e.exports={p_overflow:"Footer_p_overflow__1CB30"}},145:function(e,t,r){},146:function(e,t,r){},147:function(e,t,r){"use strict";r.r(t);var n=r(4),a=r.n(n),c=r(43),o=r.n(c),s=r(33),l=r(32),i=r(14),j=r(16),d=r(42),u=r(110),b=r(111),h=r(5),O=function(e){var t=e.panelImg;return Object(h.jsx)("div",{className:"panel",children:Object(h.jsx)(b.LazyLoadImage,{src:"/".concat(t.path),alt:t.name})})},m=r(39),x=r(86),f=r(41),p=r(112),g=r.n(p),_=function(e){var t=e.manga,r=e.zoomValue,n=e.brightVal,a=e.setBright,c=e.setZoomVal,o=e.scrollDown;return Object(h.jsxs)("header",{children:[Object(h.jsx)("h2",{className:"logo",children:t?t.name:"..."}),Object(h.jsxs)("nav",{children:[Object(h.jsx)("div",{children:Object(h.jsx)("button",{onClick:o,className:g.a.scroll_btn,children:Object(h.jsx)(f.a,{})})}),Object(h.jsxs)("div",{className:"bright-control",children:[Object(h.jsx)("span",{children:n}),Object(h.jsx)("input",{type:"range",min:"0",max:"100",onChange:function(e){return a(e.target.value)},value:n})]}),Object(h.jsxs)("div",{className:"zoom-control",children:[Object(h.jsx)("button",{type:"button",onClick:function(){return c(r>1?r-1:1)},children:Object(h.jsx)(f.c,{})}),Object(h.jsx)("input",{type:"text",onChange:function(e){return e.target.value<=10&e.target.value>0&&c(e.target.value)},value:r}),Object(h.jsx)("button",{type:"button",onClick:function(){return c(r<10?r+1:10)},children:Object(h.jsx)(f.d,{})})]})]})]})};_.defaultProps={manga:{name:"",data:[]}};var v,y,N=_,w=r(71),k=r.n(w),S=function(e){var t=e.children,r=e.hasErrors,n=e.errors,a=e.retry,c=(e.loading,e.status);return r?(console.log(r),Object(h.jsxs)("div",{className:k.a.errorBlock,children:[Object(h.jsx)("h3",{children:"Something went wrong..."}),Object(h.jsx)("button",{className:k.a.retryBtn,onClick:function(){return a()},style:{cursor:4===c?"progress":"pointer"},children:4===c?"Retrying...":"Retry?"}),Object(h.jsx)("code",{className:k.a.errorMsg,children:n.message})]})):t},B=r(87),C=Object(l.gql)(v||(v=Object(B.a)(["\nquery AllMangas($all: Boolean = false) {\n  list: mangas {\n    id\n    name\n    pathname @include(if: $all)\n    createdAt\n    size\n    data @include(if: $all) {\n      name\n      path\n    }\n  }\n}\n"]))),F=Object(l.gql)(y||(y=Object(B.a)(["\nquery getManga($id: ID!, $all: Boolean = false) {\n   manga(id: $id) {\n      id\n      name\n      pathname @include(if: $all)\n      createdAt\n      size\n      data {\n         name\n         path\n      }\n   }\n}\n"]))),z=r(45),D=r.n(z),M=x.animateScroll,P=x.Events,E=function(){var e=Object(n.useState)(5),t=Object(j.a)(e,2),r=t[0],a=t[1],c=Object(n.useState)(100),o=Object(j.a)(c,2),s=o[0],b=o[1],x={text:Object(m.useSpring)({from:{opacity:1},opacity:0,loop:{reverse:!0}})},f=Object(i.f)(),p=new URLSearchParams(f.search).get("id"),g=Object(l.useQuery)(F,{variables:{id:p}}),_=g.loading,v=g.data,y=g.error,w=g.refetch,k=d.a.create({brightnessAdjust:{filter:"brightness(".concat(s,"%)")},widthAdjust:{maxWidth:"".concat(700*(r/10+.5),"px"),transition:"0.3s"}});return Object(n.useEffect)((function(){P.scrollEvent.register("begin",(function(e,t){console.log("begin",e,t)})),P.scrollEvent.register("end",(function(e,t){console.log("end",e,t)})),M.scrollToTop()})),Object(h.jsx)("div",{children:Object(h.jsx)(S,{hasErrors:y&&!0,errors:y,retry:w,children:Object(h.jsxs)("div",{className:"wrapper",children:[Object(h.jsx)(u.a,{height:"3px",top:"30px",color:"#546",bgColor:"#aae"}),Object(h.jsx)(N,{manga:!_&&v.manga,zoomValue:r,brightVal:s,setBright:b,setZoomVal:a,scrollDown:function(){M.scrollToBottom({duration:function(e){return 200*e},delay:500,smooth:"linear"})}}),Object(h.jsx)("div",{className:Object(d.b)(k.brightnessAdjust,k.widthAdjust),id:"viewer",children:_?Object(h.jsx)("div",{style:{flexGrow:1},className:D.a.loading_style,children:Object(h.jsx)("h3",{children:Object(h.jsx)(m.animated.span,{style:x.text,children:"Loading..."})})}):v.manga.data.map((function(e,t){return Object(h.jsx)(O,{panelImg:e},t)}))})]})})})},A=r(117),V=r(7),H=r(72),R=(r(143),r(73)),L=r.n(R),T=r(48),I=r.n(T),G=function(e){var t,r,a=Object(n.useMemo)((function(){return[{Header:"Name",accessor:"name",sortDescFirst:!0,Cell:function(e){return e.value.replace(/[\])}[{(_]/g,"")}},{Header:"Size",accessor:"size",sortDescFirst:!0,Cell:function(e){var t=e.value;return"".concat((t/1e6).toFixed(2),"mb")}},{Header:"Date",accessor:"createdAt",Cell:function(e){var t=e.value;return new Date(t).toDateString()},sortDescFirst:!0}]}),[]),c=Object(n.useMemo)((function(){return e.data}),[]),o=Object(H.useTable)({columns:a,data:c},H.useFilters,H.useSortBy),l=o.getTableProps,i=o.getTableBodyProps,j=o.headerGroups,d=o.rows,u=o.prepareRow,b=o.setFilter;return Object(n.useEffect)((function(){b("name",e.filterValue)}),[e.filterValue,b]),Object(h.jsxs)("table",Object(V.a)(Object(V.a)({className:"list"},l()),{},{children:[Object(h.jsxs)("colgroup",{children:[Object(h.jsx)("col",{className:"col-name"}),Object(h.jsx)("col",{className:"col-size"}),Object(h.jsx)("col",{className:"col-createdAt"})]}),Object(h.jsx)("thead",{children:(r=j,r.map((function(e){return Object(h.jsx)("tr",Object(V.a)(Object(V.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)("th",Object(V.a)(Object(V.a)({className:L()(e.id,I.a.flex_column)},e.getHeaderProps(e.getSortByToggleProps({title:"Sort by "+e.Header}))),{},{children:Object(h.jsxs)("div",{className:I.a.sort_logo,children:[Object(h.jsx)("h4",{className:e.id,children:e.render("Header")}),Object(h.jsx)("div",{children:Object(h.jsx)(f.a,{className:L()(e.isSorted?e.isSortedDesc?I.a.sort_down:I.a.sort_up:I.a.sort_none),fontSize:"1.2rem"})})]})}))}))}))})))}),Object(h.jsx)("tbody",Object(V.a)(Object(V.a)({className:L()(I.a.transitionize)},i()),{},{children:(t=d,t.map((function(e){return u(e),Object(h.jsx)("tr",Object(V.a)(Object(V.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(h.jsx)("td",Object(V.a)(Object(V.a)({title:"createdAt"===e.column.id?new Date(e.value).toDateString():e.value,className:e.column.id},e.getCellProps()),{},{children:Object(h.jsx)(s.b,{to:"/manga?id=".concat(e.row.original.id),children:Object(h.jsx)("span",{children:e.render("Cell")})})}))}))}))})))}))]}))},Z=function(e){return Object(h.jsx)(G,{data:e.data,filterValue:e.filterValue})},$=function(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),r=t[0],a=t[1],c=Object(l.useQuery)(C,{partialRefetch:!0,notifyOnNetworkStatusChange:!0}),o={text:Object(m.useSpring)({from:{opacity:1},opacity:0,loop:{reverse:!0},reset:!0})};return Object(h.jsxs)("div",{id:"main",children:[Object(h.jsxs)("div",{className:D.a.header_flex,children:[Object(h.jsx)("h1",{className:"logo",children:Object(h.jsx)(s.b,{to:"/",style:{color:"white"},children:Object(h.jsx)("div",{children:"Reader"})})}),Object(h.jsx)("div",{children:Object(h.jsxs)("button",{onClick:function(){return c.refetch()},className:D.a.refresh_btn,children:[Object(h.jsx)(A.a,{fontSize:"1.2rem"}),Object(h.jsx)("span",{children:"Refresh"})]})})]}),Object(h.jsx)("input",{onChange:function(e){return a(e.target.value)},className:D.a.search_bar,type:"search",placeholder:"Filter",value:r}),Object(h.jsx)(S,{status:c.networkStatus,loading:c.loading,retry:c.refetch,hasErrors:c.error&&!0,errors:c.error,children:c.loading?Object(h.jsx)("div",{className:D.a.loading_style,children:Object(h.jsx)("h3",{children:Object(h.jsx)(m.animated.span,{style:o.text,children:"Loading..."})})}):Object(h.jsx)(Z,{data:c.data.list,filterValue:r})})]})},q=d.a.create({NotFoundBlock:{width:"100%",height:"94.5vh",display:" flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},NotFoundCodeBlock:{padding:"1rem",backgroundColor:"#335",color:"#eee",fontSize:"1.4rem",fontFamily:"'Jetbrains Mono', monospace"},GoHomeLink:{padding:".5rem",":after":{content:"",display:"block",borderBottom:"3px solid #889"},":hover":{color:"#778"}}}),Q=function(){return Object(h.jsxs)("div",{className:Object(d.b)(q.NotFoundBlock),children:[Object(h.jsx)("h1",{children:"404 Not Found"}),Object(h.jsx)("code",{className:Object(d.b)(q.NotFoundCodeBlock),children:"The Page you're looking for isn't here :P."}),Object(h.jsx)(s.b,{className:Object(d.b)(q.GoHomeLink),to:"/",children:"Go Home Now"})]})},J=(r(145),function(){return Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{exact:!0,path:"/",component:$}),Object(h.jsx)(i.a,{path:"/manga",component:E}),Object(h.jsx)(i.a,{component:Q})]})}),Y=(r(146),r(26)),X=r.n(Y),K=r(44),U=r(118),W=r.n(U),ee=function(){var e=Object(n.useRef)(0),t=Object(m.useSpring)({to:function(){var e=Object(K.a)(X.a.mark((function e(t){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({color:"#afe",translateY:-2,opacity:1});case 2:return e.next=4,t({rotateZ:30});case 4:return e.next=6,t({rotateZ:-30});case 6:return e.next=8,t({rotateZ:360,config:{tension:100}});case 8:return e.next=10,t({translateX:1200,config:{mass:10,tension:150}});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),from:{color:"white",translateY:10,opacity:0,rotateZ:0,translateX:10},loop:function(){return e.current++<5},reset:!0,delay:500});return Object(h.jsx)("footer",{children:Object(h.jsxs)("p",{className:W.a.p_overflow,children:["Thanks for Reading my manga reader"," ",Object(h.jsx)(m.animated.span,{style:t,children:Object(h.jsx)(f.b,{fontSize:"1.2rem"})})," "]})})},te=new l.ApolloClient({uri:"/api/ql",cache:new l.InMemoryCache,name:"MangaQL"});o.a.render(Object(h.jsxs)(a.a.StrictMode,{children:[Object(h.jsx)(s.a,{children:Object(h.jsx)(l.ApolloProvider,{client:te,children:Object(h.jsx)(J,{})})}),Object(h.jsx)(ee,{})]}),document.querySelector("#container"))},45:function(e,t,r){e.exports={loading_style:"main_loading_style__1Lm1M",header_flex:"main_header_flex__1ylRE",refresh_btn:"main_refresh_btn__2iuFG",search_bar:"main_search_bar__3gPIp"}},48:function(e,t,r){e.exports={sort_logo:"reader_sort_logo__2FeFC",sort_down:"reader_sort_down__3mXiQ",sort_up:"reader_sort_up__1SwmL",sort_none:"reader_sort_none__1JKuy",center:"reader_center__2dnH_",header:"reader_header__1o9hK",flex_column:"reader_flex_column__2DQPt",transitionize:"reader_transitionize__30Yx2"}},71:function(e,t,r){e.exports={errorMsg:"ErrorBlock_errorMsg__1O09I",errorBlock:"ErrorBlock_errorBlock__39bVM",retryBtn:"ErrorBlock_retryBtn__1YTZ1"}}},[[147,1,2]]]);
//# sourceMappingURL=main.6f843310.chunk.js.map