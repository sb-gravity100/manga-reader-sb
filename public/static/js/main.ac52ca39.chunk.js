(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{66:function(e,t){},69:function(e,t,n){},7:function(e,t,n){e.exports={scroll_btn:"style_scroll_btn__2DVon",center:"style_center__2ktxo",header:"style_header__QLGaS",flex_column:"style_flex_column__2GipV",transitionize:"style_transitionize__2Cutg",NotFoundBlock:"style_NotFoundBlock__3nBZt",NotFoundCodeBlock:"style_NotFoundCodeBlock__3eTYR",GoHomeLink:"style_GoHomeLink__FUFnD",errorMsg:"style_errorMsg__3EXXt",errorBlock:"style_errorBlock__2rrBe",retryBtn:"style_retryBtn__obQzX",p_overflow:"style_p_overflow__2lbNJ",loading_style:"style_loading_style__Q5HdP",header_flex:"style_header_flex__BGuEN",logo:"style_logo__1aLeU",refresh_btn:"style_refresh_btn__3OP8f",StickyBar:"style_StickyBar__2JC9z"}},70:function(e,t,n){},71:function(e,t,n){"use strict";n.r(t);n(45);var r=n(1),c=n(22),a=n.n(c),s=n(8),o=n(6),i=n(16),l=n(24),u=n(3),d=Object(u.d)({initialState:{blur:!0,zoom:5,page:{current:0},limit:10,brightness:100,search:""},name:"control",reducers:{setZoom:function(e,t){e.zoom=t.payload},setBrightness:function(e,t){e.brightness=t.payload},setSearch:function(e,t){e.search=t.payload},clearSearch:function(e){e.search=""},toggleBlur:function(e){e.blur=!e.blur},toggleRefresh:function(e){e.refresh=!e.refresh},toggleCovers:function(e){e._updateCovers=!e._updateCovers},setPage:function(e,t){Object.assign(e.page,t.payload)},gotoPage:function(e,t){e.page.current=e.page[t.payload]}}}),j=d.actions,b=j.setZoom,h=(j.setBrightness,j.setSearch),m=j.clearSearch,f=j.toggleBlur,g=(j.toggleCovers,j.toggleRefresh,j.setPage),x=(j.gotoPage,d.reducer),O=n(39),v=n(10),p=Object(O.a)({reducerPath:"MangaApi",baseQuery:Object(v.d)({baseUrl:"/api"}),endpoints:function(e){return{allMangas:e.query({query:function(e){return{url:"/mangas",params:e||{page:0,limit:10}}}}),getManga:e.query({query:function(e){return{url:"/manga",params:{id:e}}}}),search:e.query({query:function(e){return"/search?q=".concat(e||"")}})}}}),_=p,y=(p.useAllMangasQuery,p.useGetMangaQuery),N=(p.useLazySearchQuery,p.useSearchQuery),k=p.useLazyAllMangasQuery,C=(p.useLazyGetMangaQuery,p.usePrefetch,Object(u.a)({reducer:Object(l.a)({controls:x},_.reducerPath,_.reducer),middleware:function(e){return e().concat(_.middleware)}})),B=s.e,S=function(){return Object(s.d)()},F=C,z=n(13),w=n(40),E=n(21),L=n(35),P=n(19),G=n.n(P),M=n(2),Q=function(e){var t=e.item,n=B((function(e){return e.controls.blur}));return Object(M.jsxs)(i.b,{className:"flex-item",title:t.name,to:"/manga?id=".concat(t.id),children:[Object(M.jsx)("img",{className:G()("bg-img",n&&"blur-img"),src:t.cover||void 0}),Object(M.jsx)("div",{className:"description",children:Object(M.jsx)("p",{children:t.name})})]})},q=n(25),R=n.n(q),V=n(7),H=n.n(V),J=function(){return Object(M.jsx)("div",{className:H.a.loading_style,children:Object(M.jsx)("h3",{children:Object(M.jsx)("div",{className:"loading-animation",children:"Loading..."})})})},A=n(34),I=n.n(A),T=R.a.curry((function(e,t,n){for(var r=[],c=[],a=e;a<t-1&&a<e+n;a++)r.push(a+1);for(var s=e;s>0&&s>e-n;s--)c.push(s-1);return{next:r,prev:c.reverse()}})),U=function(e){var t=Object(o.f)(),n=Object(o.g)(),c=B((function(e){return e.controls.page})),a=Object(r.useState)(T(Number(c.current),c.total,2)),s=Object(E.a)(a,2),i=s[0],l=s[1],u=function(e){var r=I.a.parse(n.search.slice(1));t.push({search:"?"+I.a.stringify(Object.assign(r,{page:e}))})};return Object(r.useEffect)((function(){c.current===c.total-1||0===c.current?l(T(Number(c.current),c.total,4)):c.total-1-c.current===1||1===c.current?l(T(Number(c.current),c.total,3)):l(T(Number(c.current),c.total,2)),console.log(c.total-1-c.current,c.current)}),[c]),Object(M.jsxs)("div",{className:"nav",children:[Object(M.jsx)("button",{disabled:"number"!==typeof c.first||c.current===c.first,onClick:function(){return u(c.first)},children:Object(M.jsx)(z.a,{})}),Object(M.jsx)("button",{disabled:"number"!==typeof c.prev||c.current===c.first,onClick:function(){return u(c.prev)},children:Object(M.jsx)(z.c,{})}),i.prev.map((function(e){return Object(M.jsx)("button",{onClick:function(){return u(e)},children:e},e)})),Object(M.jsx)("button",{disabled:!0,children:c.current}),i.next.map((function(e){return Object(M.jsx)("button",{onClick:function(){return u(e)},children:e},e)})),Object(M.jsx)("button",{disabled:"number"!==typeof c.next||c.current===c.last,onClick:function(){return u(c.next)},children:Object(M.jsx)(z.d,{})}),Object(M.jsx)("button",{disabled:"number"!==typeof c.last||c.current===c.last,onClick:function(){return u(c.last)},children:Object(M.jsx)(z.b,{})})]})},X=function(e){var t;return Object(M.jsxs)("div",{className:"main-reader",children:[Object(M.jsx)(U,{refetch:e.refetch}),Object(M.jsx)("div",{className:"main-reader-box",children:!e.loading&&e.data?Object(M.jsx)("div",{className:G()("main-reader-flex","current"),children:null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(M.jsx)(Q,{item:e},e.id)}))}):Object(M.jsx)(J,{})})]})},Z=function(e){var t=e.children,n=e.hasErrors,r=e.errors,c=e.retry,a=e.isFetching;return n?(console.log(r),Object(M.jsxs)("div",{className:H.a.errorBlock,children:[Object(M.jsx)("h3",{children:"Something went wrong..."}),Object(M.jsx)("button",{className:H.a.retryBtn,onClick:function(){return c()},style:{cursor:a?"progress":"pointer"},children:a?"Retrying...":"Retry?"}),Object(M.jsx)("code",{className:H.a.errorMsg,children:(null===r||void 0===r?void 0:r.message)||404===(null===r||void 0===r?void 0:r.originalStatus)?"Connection to server cannot be reached.":r.error})]})):Object(M.jsx)(M.Fragment,{children:t})},D=n(72),W=n(73),Y=function(e){return Object(M.jsxs)(i.b,{to:"/manga?id=".concat(e.item.id),className:"search-item",title:e.item.name,children:[Object(M.jsx)("div",{className:"cover-img",style:{backgroundImage:"url('".concat(e.item.cover,"')")}}),Object(M.jsx)("div",{className:"name",children:R.a.chunk(e.item.name.split(" "),8).map((function(e,t){return Object(M.jsx)("p",{children:e.join(" ")},t)}))})]})},K=function(e){var t=B((function(e){return e.controls.search})),n=Object(D.a)(!1),r=Object(E.a)(n,2),c=r[0],a=r[1],s=S(),o=N(t);return Object(M.jsx)(M.Fragment,{children:Object(M.jsxs)("div",{className:"search-bar",children:[Object(M.jsx)("input",{type:"text",name:"search",placeholder:"Search...",onChange:function(e){e.target.value?s(h(e.target.value)):s(m())},autoComplete:"off",autoCorrect:"off",onFocus:function(){return a(!0)},onBlur:function(){return a(!1)}}),!!t&&Object(M.jsxs)("div",{className:"search-list",children:[!!t&&o.isFetching&&Object(M.jsx)("div",{className:"search-loading loading-animation",children:"Loading results..."}),o.isSuccess&&0===o.data.length&&c&&!o.isFetching&&!!t&&Object(M.jsxs)("div",{className:"search-loading",children:["Nothing Found! ",":("]}),o.isSuccess&&o.data.map((function(e){return Object(M.jsx)(Y,Object(w.a)({},e),e.item.id)}))]})]})})},$=function(){var e,t,n=B((function(e){return e.controls})),c=n.page,a=n.limit,s=Object(W.a)("page"),o=B((function(e){return e.controls.blur})),l=k(),u=Object(E.a)(l,2),d=u[0],j=u[1],b=S();return Object(r.useEffect)((function(){d({page:s?Number(s):c.current,limit:a})}),[s]),Object(r.useEffect)((function(){var e,t,n,r,c,a,o,i,l;b(g({current:s?Number(s):0,next:null===(e=j.data)||void 0===e||null===(t=e.next)||void 0===t?void 0:t.page,prev:null===(n=j.data)||void 0===n||null===(r=n.prev)||void 0===r?void 0:r.page,last:null===(c=j.data)||void 0===c||null===(a=c.last)||void 0===a?void 0:a.page,first:null===(o=j.data)||void 0===o||null===(i=o.first)||void 0===i?void 0:i.page,total:null===(l=j.data)||void 0===l?void 0:l.total}))}),[j]),Object(M.jsxs)("div",{id:"main",children:[Object(M.jsxs)("div",{className:H.a.header_flex,children:[Object(M.jsx)("h1",{className:"logo",children:Object(M.jsx)(i.b,{to:"/",children:Object(M.jsx)("div",{children:"Reader"})})}),Object(M.jsxs)("div",{className:"btn-flex",children:[Object(M.jsxs)("button",{onClick:function(){return d({refresh:!0,page:s?Number(s):c.current,limit:a})},className:H.a.refresh_btn,children:[Object(M.jsx)(L.a,{fontSize:"1.2rem"}),Object(M.jsx)("div",{children:"Refresh"})]}),Object(M.jsxs)("button",{onClick:function(){return d({_updateCovers:!0,page:s?Number(s):c.current,limit:a})},className:H.a.refresh_btn,children:[Object(M.jsx)(L.a,{fontSize:"1.2rem"}),Object(M.jsx)("div",{children:"Covers"})]}),Object(M.jsxs)("button",{onClick:function(){return b(f())},className:G()("is-blur-check",H.a.refresh_btn),children:[Object(M.jsx)("input",{type:"checkbox",checked:o,onChange:function(){return b(f())}}),Object(M.jsx)("div",{children:"Blur"})]})]})]}),Object(M.jsx)(K,{}),Object(M.jsx)(Z,{retry:function(){return d()},hasErrors:j.isError,errors:j.error,isFetching:j.isFetching,children:Object(M.jsx)(X,{total:null===j||void 0===j||null===(e=j.data)||void 0===e?void 0:e.items.length,data:null===j||void 0===j||null===(t=j.data)||void 0===t?void 0:t.items,loading:j.isFetching,refetch:d})})]})},ee=n(42),te=n(43),ne=n.p+"static/media/404.6a579c40.jpg",re=function(e){var t=e.panelImg;return Object(M.jsx)("div",{className:"panel",children:Object(M.jsx)(te.a,{src:"/".concat(t.path),alt:t.name,error:ne,style:t?{}:{background:"#444",height:"500px"}})})},ce=function(e){var t=e.manga,n=e.zoomValue,r=void 0===n?5:n,c=(e.brightVal,S());return Object(M.jsxs)("header",{children:[Object(M.jsx)("h2",{className:"logo",children:(null===t||void 0===t?void 0:t.name)||"..."}),Object(M.jsxs)("nav",{children:[Object(M.jsx)("div",{className:"bright-control",children:Object(M.jsx)("button",{children:Object(M.jsx)(z.g,{fontSize:"1.1rem"})})}),Object(M.jsxs)("div",{className:"zoom-control",children:[Object(M.jsx)("button",{type:"button",onClick:function(){return c(b(r>1?r-1:1))},children:Object(M.jsx)(z.h,{})}),Object(M.jsx)("input",{type:"text",value:r,contentEditable:"false"}),Object(M.jsx)("button",{type:"button",onClick:function(){return c(b(r<10?r+1:10))},children:Object(M.jsx)(z.i,{})})]})]})]})},ae=n(36),se=function(){var e,t=Object(W.a)("id")||"",n=y(Number(t)),c=n.data,a=n.isLoading,s=n.error,o=n.refetch,i=n.isFetching,l=n.isError,u=B((function(e){return e.controls})),d=700*(u.zoom/10+.5),j=ae.a.create({main:{filter:"brightness(".concat(u.brightness,"%)"),maxWidth:"".concat(d,"px"),transition:"0.3s"}});return Object(r.useEffect)((function(){a?document.title="Loading...":c&&(document.title=null===c||void 0===c?void 0:c.name)})),Object(r.useEffect)((function(){window.scroll({top:0,left:0})}),[]),Object(M.jsxs)("div",{className:"manga-container",children:[a&&Object(M.jsx)(J,{}),Object(M.jsx)(Z,{hasErrors:l,errors:s,retry:o,isFetching:i,children:Object(M.jsxs)("div",{className:"wrapper",children:[!a&&Object(M.jsx)(ee.a,{height:"5px",bgColor:"#1c2122",top:"30px",color:"#50d8d7"}),Object(M.jsx)(ce,{manga:c,zoomValue:u.zoom,brightVal:u.brightness}),Object(M.jsx)("div",{className:Object(ae.b)(j.main),id:"viewer",children:!a&&(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.map((function(e,t){return Object(M.jsx)(re,{panelImg:e},t)})))})]})})]})},oe=function(){return Object(M.jsxs)("div",{className:H.a.NotFoundBlock,children:[Object(M.jsx)("h1",{children:"404 Not Found"}),Object(M.jsx)("code",{className:H.a.NotFoundCodeBlock,children:"The Page you're looking for isn't here :P."}),Object(M.jsx)(i.b,{className:H.a.GoHomeLink,to:"/",children:"Go Home Now"})]})},ie=(n(69),function(){return Object(M.jsxs)(o.c,{children:[Object(M.jsx)(o.a,{exact:!0,path:"/",component:$}),Object(M.jsx)(o.a,{path:"/manga",component:se}),Object(M.jsx)(o.a,{component:oe})]})}),le=(n(70),function(){return Object(M.jsx)("footer",{children:Object(M.jsxs)("p",{className:H.a.p_overflow,children:["Thanks for Reading my manga reader ",Object(M.jsx)(z.f,{fontSize:"1.2rem"})]})})}),ue=function(){var e=Object(o.g)();return Object(M.jsxs)("div",{className:H.a.StickyBar,children:[Object(M.jsx)("button",{onClick:function(){return window.scroll({behavior:"smooth",top:0,left:0})},children:Object(M.jsx)(z.e,{fontSize:"3rem"})}),"/"!==e.pathname.trim()&&Object(M.jsx)(i.b,{to:"/",children:"Go Back"})]})};a.a.render(Object(M.jsx)(i.a,{children:Object(M.jsxs)(s.a,{store:F,children:[Object(M.jsx)(ie,{}),Object(M.jsx)(ue,{}),Object(M.jsx)(le,{})]})}),document.querySelector("#container"))}},[[71,1,2]]]);
//# sourceMappingURL=main.ac52ca39.chunk.js.map